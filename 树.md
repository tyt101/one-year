<a name="LISyy"></a>
# è¯´æ˜
å…³äºæ•°æ®ç»“æ„ä¸­æ ‘çš„ç®—æ³•ï¼Œç»è¿‡æœ€è¿‘ä¸€æ®µæ—¶é—´çš„åšé¢˜ç»éªŒï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œæ— éå°±æ˜¯ä¸¤ç§æƒ…å†µ

- å°†æ‰€æœ‰çš„æ ‘éƒ½éå†ä¸€éï¼Œå¾—å‡ºæœ€åçš„è§£ã€‚
- æ ‘çš„åˆ†è§£æ€è·¯ï¼Œé€šè¿‡æ ‘çš„å­æ ‘æ¨å¯¼å‡ºåŸé—®é¢˜çš„è§£ã€‚

å…³äºç¬¬ä¸€ç§**ï¼ˆå°†æ‰€æœ‰çš„æ ‘éƒ½éå†ä¸€éï¼Œå¾—å‡ºæœ€åçš„è§£ã€‚ï¼‰**ï¼Œæœ€ç›´è§‚çš„ç†è§£å°±æ˜¯ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œéå†æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¯¹è¿™äº›èŠ‚ç‚¹è¿›è¡Œä¸€å®šçš„å¤„ç†ï¼Œæœ€åè·å¾—è§£ã€‚è®©æˆ‘ä»¬æ¥çœ‹ä»¥ä¸‹å››é“é¢˜ï¼š
<a name="eidAa"></a>
# æ ‘éå†
<a name="lGl0N"></a>
## å‰åºéå†
æˆ‘ä»¬å·²çŸ¥å‰åºéå†çš„æ–¹å¼æ˜¯**â€œæ ¹->å·¦->å³â€**ï¼Œæ‰€ä»¥é€šè¿‡å®ƒæˆ‘ä»¬èƒ½å¤Ÿå¾ˆæ˜ç¡®çš„çŸ¥é“åº”è¯¥ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œä¾æ¬¡éå†å·¦å­èŠ‚ç‚¹ç›´åˆ°nullï¼Œå†å›æº¯å›å»éå†å³å­èŠ‚ç‚¹ï¼Œå› æ­¤å¯ä»¥å†™ä¸‹å¦‚ä¸‹ä»£ç ï¼ˆä¼ªï¼‰
```javascript
traverse(root) {

  !root && return 

  // éå†æ ¹
  console.log(root.val)

  // éå†å·¦
  traverse(root.left)

  // å›æº¯---éå†å³

  traverse(root.right)
}

// æˆ–è€…

traverse(root) {
  // åˆ©ç”¨ æ ˆ å…ˆè¿›åå‡ºè¿›è¡Œéå†
  stack = [root]
  
  while(stack.length) {
    cur = stack.pop()
    // éå†
    console.log(cur.val)
    // æ”¾å…¥å³å…¥æ ˆ
    cur.right && stack.push(cur.right)
    // æ”¾å…¥å·¦å…¥æ ˆ
  	cur.left && stack.push(cur.left)
  }
}
```
<a name="FVIpy"></a>
## ä¸­åºéå†
<br />åŒç†ï¼Œå¯¹æ¯”ä¸­åºéå†(â€œå·¦->æ ¹->å³â€)ï¼Œååºéå†(â€œå·¦->å³->æ ¹â€)ä¹Ÿæ˜¯å¦‚æ­¤, å±‚åºéå†æˆ‘ä»¬åé¢è¯´
```javascript
traverse(root){

  !root && return 

  // éå†å·¦
  traverse(root.left)

  // éå†æ ¹
  console.log(root.val)

  // éå†å³
  traverse(root.right)
  
}

// æˆ–è€…

traverse(root) {
  let cur = root
  let stack = []

  while( cur || stack.length) {
    
    // å®šä½åˆ°å·¦å¶å­èŠ‚ç‚¹
    while(cur) {
      stack.push(cur)
      cur = cur.left
    }

    // éå†
    cur = stack.pop()
    console.log(cur.val)

    cur = cur.right
  }
}
```
<a name="tBKYx"></a>
## ååºéå†
```javascript
traverse(root) {

  !root && return 

  // éå†å·¦
  traverse(root.left)

  // å›æº¯---éå†å³

  traverse(root.right)

  // éå†æ ¹
  console.log(root.val)
}

// æˆ–è€…

traverse(root) {
  // åˆ©ç”¨ æ ˆ å…ˆè¿›åå‡ºè¿›è¡Œéå†
  stack = [root]
  
  while(stack.length) {
    cur = stack.pop()
    // æ”¾å…¥å³å…¥æ ˆ
    cur.right && stack.push(cur.right)
    // æ”¾å…¥å·¦å…¥æ ˆ
  	cur.left && stack.push(cur.left)
    // éå†
    console.log(cur.val)
  }
}
```
æœ€åæ¥è¯´ä¸€ä¸‹å±‚åºéå†ï¼Œå±‚åºéå†çš„è¿‡ç¨‹æ˜¯é’ˆå¯¹æ ‘çš„æ¯ä¸€å±‚ï¼Œä»å·¦åˆ°å³ä¾æ¬¡éå†ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬åªéœ€è¦å…³æ³¨å½“å‰å±‚çš„èŠ‚ç‚¹ï¼Œå¹¶å°†ä»–ä»¬ä¾æ¬¡è¾“å‡ºå°±å¯ä»¥äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨ä¸€ä¸ªç©ºé—´æ¥è®°å½•å½“å‰å±‚æœ‰å“ªäº›èŠ‚ç‚¹ï¼Œç”±æ­¤å°±æƒ³åˆ°äº†é˜Ÿåˆ—ç»“æ„> **(æ€è€ƒğŸ¤”ï¼šä¸ºä»€ä¹ˆä¸èƒ½ç”¨æ ˆç»“æ„ï¼Œé˜Ÿåˆ—ç»“æ„å’Œæ ˆç»“æ„æœ‰å“ªäº›åŒºåˆ«)**<br />å…ˆç›´æ¥ä¸Šä»£ç :
```javascript
traverse(root) {
  !root && return []

  queue = [root]

  // åˆ¤æ–­å½“å‰å±‚æ˜¯å¦ä¸ºç©º
  while(queue.length) {
    // è®°å½•len
    len = queue.length
    // éå†å½“å‰å±‚æ‰€æœ‰èŠ‚ç‚¹
    for(i =0; i < len; i++) {
      top = queue.shift()
      console.log(top.val)

      top.left && queue.push(top.left)

      top.right && queue.push(top.right)
    }
    
  }
}
```
**é‚£ä¸ºä»€ä¹ˆä½¿ç”¨æ ˆç»“æ„ä¸è¡Œï¼Œè€Œé˜Ÿåˆ—ç»“æ„å¯ä»¥å‘¢**ï¼Ÿæˆ‘ç›¸ä¿¡å¾ˆå¤šäººåº”è¯¥å·²ç»çœ‹å‡ºæ¥äº†ï¼Œå¦‚æœä½¿ç”¨æ ˆç»“æ„(å…ˆè¿›åå‡º)ï¼Œè¦è¾¾åˆ°ä»å·¦è‡³å³éå†å½“å‰å±‚ï¼Œ å¦‚æœæ ‘åªæœ‰ä¸¤å±‚ã€1ï¼Œ2ï¼Œnullï¼Œnullï¼Œ3ï¼Œnullï¼Œnullã€‘ï¼Œæˆ‘ä»¬äº¤æ¢pushè¿›å…¥å·¦å³å­æ ‘çš„é¡ºåºå³å¯äº†ã€‚ä½†æ˜¯å½“æ ‘è¶…è¿‡2å±‚ï¼Œç»“æ„ä¸ºã€1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ã€‘çš„æ—¶å€™ï¼Œä¼šå‘ç°æ ˆç»“æ„ä¸€ç›´ä¸æ–­pushæ–°èŠ‚ç‚¹ï¼Œå½“æˆ‘ä»¬å–å‡ºæ ˆé¡¶æ—¶ï¼Œæ ˆé¡¶èŠ‚ç‚¹çš„å±‚çº§æ•°å·²ç»å‘ç”Ÿäº†æ”¹å˜ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´è¾“å‡ºçš„æ ‘èŠ‚ç‚¹é”™ä¹±ã€‚<br />è€Œé˜Ÿåˆ—ç»“æ„(å…ˆè¿›å…ˆå‡º)ï¼Œåœ¨æˆ‘ä»¬è®°å½•çš„lené•¿åº¦ä¸‹ï¼Œéƒ½æ˜¯è¯¥rootèŠ‚ç‚¹çš„ä¸‹ä¸€çº§å­èŠ‚ç‚¹ï¼Œæ‰€ä»¥ä¸ä¼šå¯¼è‡´å±‚çº§é”™ä¹±ï¼Œè‡ªç„¶åœ¨ä¸€ä¸ªforå¾ªç¯é‡Œè¾“å‡ºçš„èŠ‚ç‚¹éƒ½æ˜¯åŒä¸€å±‚çº§çš„èŠ‚ç‚¹ã€‚

<a name="wBoC9"></a>
# æ ‘çš„æ„é€ (ç»å…¸éå†æ–¹å¼)
ä¸Šé¢4é“é¢˜å°±æ˜¯ç»å…¸çš„æ ‘çš„å››ç§éå†æ–¹å¼ï¼Œå½“ä¸‹å·²ç»å®Œå…¨æ˜ç™½äº†å®ƒçš„éå†è¿‡ç¨‹ä»¥åŠç¼–ç å®ç°ï¼Œä¸‹é¢æˆ‘ä»¬å†æ¥çœ‹ä¸‹å®ƒçš„é€†åºæ“ä½œï¼Œæ ‘æ˜¯å¦‚ä½•æ„é€ çš„ã€‚å½“ç„¶ï¼Œæ ‘çš„æ„é€ æ˜¯æ ‘çš„ç»„è£…è¿‡ç¨‹ï¼ŒåŸºæœ¬æ€è·¯å°±æ˜¯æ„é€ èŠ‚ç‚¹ï¼Œå†æ„é€ å®ƒçš„å­èŠ‚ç‚¹(å·¦ï¼Œå³)ï¼Œè¿™æ ·ä¸€çœ‹ï¼Œè¿™ä¸å°±æ˜¯æ ‘çš„åˆ†è§£å˜›ã€‚åŒæ ·ï¼Œæˆ‘ä»¬æ¥çœ‹ä»¥ä¸‹å››é“é¢˜ï¼š

- æ„é€ æœ€å¤§äºŒå‰æ ‘
- é€šè¿‡å‰åºå’Œä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘
- é€šè¿‡ä¸­åºå’Œååºéå†åºåˆ—æ„é€ äºŒå‰æ ‘
- é€šè¿‡å‰åºå’Œååºéå†åºåˆ—æ„é€ äºŒå‰æ ‘
<a name="m8mG1"></a>
## æ„é€ æœ€å¤§äºŒå‰æ ‘
```markdown
- å‡è®¾ä¸€é¢—ä¸å«é‡å¤å…ƒç´ çš„äºŒå‰æ ‘ä¸º[3, 2, 1, 6, 0, 5], æˆ‘ä»¬ç°åœ¨è¦æ„é€ æœ€å¤§äºŒå‰æ ‘ã€‚
- åˆ™æ ¹æ®æœ€å¤§äºŒå‰æ ‘çš„å®šä¹‰ï¼šäºŒå‰æ ‘çš„æ ¹æ˜¯æ•°ç»„ä¸­çš„æœ€å¤§å€¼
- åˆ†æå¯çŸ¥å¦‚ä¸‹ï¼š
  1. æ ¹èŠ‚ç‚¹ï¼šæ˜¯æ•°ç»„ä¸­çš„æœ€å¤§å€¼
  2. å·¦å­æ ‘ï¼šæ˜¯æ ¹å·¦è¾¹çš„æ•°ç»„ä¸­çš„æœ€å¤§å€¼
  3. å³å­æ ‘ï¼šæ˜¯æ ¹å³è¾¹çš„æ•°ç»„ä¸­çš„æœ€å¤§å€¼
 

- åŸºæœ¬æ€è·¯å¦‚ä¸‹ï¼š
```javascript
function findMaxIndex(nums) {
  let maxIndex = 0
  for(let i =0; i < nums.length; i++) {
    if(nums[i] > nums[maxIndex]) {
      maxIndex = i
    }
  }
  return maxIndex
}

function build(nums) {
  let MaxIndex = findMaxIndex(nums)

  let node = new TreeNode(nums[MaxIndex])
  node.left = build(nums.slice(0, MaxIndex))
  node.right = build(nums.slice(MaxIndex + 1))

  return node
}
```


- å…·ä½“ä»£ç 
```javascript
var findMaxIndex = function(nums, l, r) {
  let maxIndex = l
  for (let i = l; i <= r; i++) {
      if(nums[i] > nums[maxIndex]) {
          maxIndex = i
      }
  }
  return maxIndex
}

var build = function(nums, l, r) {
  if(l > r || !nums.length) return null
  let maxIndex = findMaxIndex(nums, l, r)
  let node = new TreeNode(nums[maxIndex])
  node.left = build(nums,l, maxIndex - 1)
  node.right = build(nums, maxIndex + 1, r)
  return node
}

var constructMaximumBinaryTree = function(nums) {
  return build(nums, 0, nums.length - 1)
};
```
```
ä¸Šè¿°ä»£ç å°±å®Œæ•´çš„å±•ç¤ºäº†å¦‚ä½•å»æ„å»ºä¸€é¢—æœ€å¤§äºŒå‰æ ‘ï¼Œå…¶å®ä»ä»£ç ä¸éš¾çœ‹å‡ºï¼Œåªè¦ç†è§£äº†æ„é€ äºŒå‰æ ‘çš„è¿‡ç¨‹ï¼Œå°±å¾ˆå®¹æ˜“å†™å‡ºä»£ç å—ï¼Œä¸€å¼€å§‹å¯èƒ½åªèƒ½å†™å‡ºæ¥â€œåŸºæœ¬æ€è·¯ä»£ç â€ï¼Œä½†æ˜¯æ²¡å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¢å¢è¡¥è¡¥ï¼Œæ¥å®Œå–„å‡ºæœ€ç»ˆçš„ç»“æœã€‚ä½†æ˜¯æ•´ä½“æ¥è¯´ï¼Œå°±æ˜¯ã€æ ‘çš„åˆ†è§£ã€‘ï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºã€åˆ†æ²»ã€‘ï¼Œä¸Šè¿°ä»£ç çš„æ„å»ºè¿‡ç¨‹ï¼Œæ˜¯ä¸æ˜¯å’Œå½’å¹¶æ’åºä¹Ÿå¾ˆåƒï¼Ÿ
```markdown
- å‰åº[3, 9, 20, 15, 7], ä¸­åº[9, 3, 15, 20, 7]

- æ€è·¯åˆ†æ
  é¦–å…ˆï¼Œåšè¿™ç§ç±»å‹çš„é¢˜ç›®ï¼Œåº”è¯¥å…ˆææ¸…æ¥šå‰åº/ä¸­åºéå†çš„è¿‡ç¨‹ï¼Œä»¥åŠå®ƒä»¬éå†è¾“å‡ºçš„ç»“æœæœ‰ä»€ä¹ˆç‰¹ç‚¹ã€‚æˆ‘ä»¬å…ˆæ¥å›é¡¾
  ä¸Šæ–‡ä¸­çš„éå†è¿‡ç¨‹ï¼Œå‰åºï¼ˆæ ¹->å·¦->å³ï¼‰ï¼Œæ‰€ä»¥pre[0]ä¸€å®šæ˜¯æ ¹èŠ‚ç‚¹ï¼Œè€Œä¸­åºéå†çš„è¿‡ç¨‹æ˜¯ï¼ˆå·¦->æ ¹->å³ï¼‰ï¼Œ
  æ ¹æ®pre[0],æ‰¾åˆ°ä¸­åºå½“ä¸­å¤„äºæ ¹èŠ‚ç‚¹çš„ä½ç½®ï¼Œå…¶å·¦å°±åº”è¯¥æ˜¯å®ƒå·¦å­æ ‘ï¼Œå…¶å³åˆ™æ˜¯å³å­æ ‘ã€‚è¿™æ ·æˆ‘ä»¬å°±å°†ä¸€é¢—æ ‘
  åˆ†è§£æˆäº†ä¸¤é¢—ï¼Œç„¶åå†é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œå°±èƒ½å¤Ÿæ„å»ºå‡ºå®Œæ•´çš„æ ‘äº†ã€‚

- åŸºæœ¬æ€è·¯å¦‚ä¸‹ï¼š
```javascript

function buildTree(preTree, ordTree) {
  return build(preTree, ordTree, 0, preTree.length - 1, 0, ordTree.length - 1)
}

function findIndexFromOrdTree(ordTree, root) {
  return ordTree.findIndex(root)
}

function build(preTree, ordTree, lStart, lEnd, rStart, rEnd) {
  let rootVal = preTree[lStart]
  let rootIndex = findIndexFromOrdTree(ordTree, root)

  let node = new TreeNode(rootVal)

  node.left = build(preTree, ordTree, lStart + 1, lStart + index - rStart, rStart, index - 1)

  node.right = build(preTree, ordTree, lStart + l + index - rStart, lEnd, index + 1, rEnd)

  return node
}
```


- å®Œæ•´ä»£ç +ä¼˜åŒ–
```javascript
// Mapå­˜å‚¨å€¼æ˜ å°„åˆ°ç´¢å¼•
let valToIndex = new Map()

var build = function(preorder, inorder, preStart, preEnd, inStart, inEnd) {
    if(preStart > preEnd || inStart > inEnd) return null
    // æ ¹å€¼
    let rootVal = preorder[preStart]
    // æ ¹ç´¢å¼•
    let rootIndex = valToIndex.get(rootVal)
    // å·¦å­èŠ‚ç‚¹é•¿åº¦
    let leftSize = rootIndex - inStart
    let root = new TreeNode(rootVal)
    // æ„å»ºå·¦å­æ ‘
    root.left = build(preorder, inorder, preStart + 1,leftSize + preStart,  inStart, rootIndex - 1)
    // æ„å»ºå³å­æ ‘
    root.right = build(preorder, inorder,  preStart + 1 + leftSize, preEnd, rootIndex + 1, inEnd)

    return root
}

var buildTree = function(preorder, inorder) {
    for(let i = 0; i < inorder.length; i++) {
        valToIndex.set(inorder[i], i)
    }
    return build(preorder, inorder, 0, preorder.length - 1, 0, inorder.length - 1)
};
```
```
åˆ†æè¿™é“é¢˜ï¼Œå…¶å®æ€è·¯å¾ˆç®€å•ï¼Œéš¾ç‚¹å…¶å®åœ¨äºæ‰¾åˆ°åˆ†å‰²å·¦å³å­æ ‘çš„ç‚¹ï¼Œå³:

:::info
var build = function(preorder, inorder, preStart, preEnd, inStart, inEnd) { }<br />å·¦å³å­æ ‘çš„preStart, preEnd, inStart, inEndè¯¥æ€ä¹ˆæ‰¾å‡ºæ¥å‘¢ï¼Ÿçœ‹å¦‚ä¸‹å›¾ï¼ˆæˆªå–è‡³labuladongçš„ç®—æ³•å°æŠ„ï¼‰
:::
![image.png](https://cdn.nlark.com/yuque/0/2023/png/29453752/1693376778671-3f0749d0-8d20-4436-9660-ce6985f0a099.png#averageHue=%23f6f0e4&clientId=u3d95e342-b25a-4&from=paste&height=145&id=u8ff75c78&originHeight=218&originWidth=480&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=100688&status=done&style=none&taskId=u7f18565c-26f2-4889-b62a-266787c3d3d&title=&width=320)

æˆ‘ä»¬å…ˆæ ¹æ®**preorderæ‰¾åˆ°æ ¹ä¸º1**ï¼Œä»¥åŠå…¶å¯¹åº”**rootIndex: 5, **<br />é¦–å…ˆæˆ‘ä»¬æ ¹æ®rootIndexçš„å€¼æ±‚å‡º**rootLeft = rootIndex - inStart**<br />æ‰€ä»¥leftçš„preorderçš„preStartä¸ºï¼š**preStart + 1**;  preEndä¸ºï¼š**preStart + rootLeft**;<br />leftçš„inorderçš„inStartä¸ºï¼š**inStart**;  inEndä¸ºï¼š**rootIndex - 1**;<br />åŒç†ï¼š<br />rightçš„preorderçš„preStartä¸ºï¼š**preStart +1 + rootLeft**; preEndä¸ºï¼š**preEnd**;<br />rightçš„inorderçš„inStartä¸ºï¼š**rootIndex + 1**;  inEndä¸ºï¼š**inEnd**

è¿™é“é¢˜çœ‹æ‡‚äº†ï¼Œæˆ‘ç›¸ä¿¡é’ˆå¯¹é€šè¿‡**ååºå’Œä¸­åºéå†æ„é€ äºŒå‰æ ‘**å’Œé’ˆå¯¹**å‰åºå’Œååºéå†æ„é€ äºŒå‰æ ‘**å°±å¾ˆç®€å•äº†ï¼Œä»¥ä¸‹å°±ç›´æ¥ä¸Šä»£ç ï¼Œå…ˆæ¥çœ‹**ååºä¸­åºéå†æ„é€ äºŒå‰æ ‘**
```javascript
let valToIndex = new Map()

var build = function(postorder, inorder, postStart, postEnd, inStart, inEnd) {
    if(postStart > postEnd || inStart > inEnd) return null
    let rootVal = postorder[postEnd]
    let rootIndex = valToIndex.get(rootVal)
    let leftLen = rootIndex - inStart
    let root = new TreeNode(rootVal)

    root.left = build(postorder, inorder, postStart, postStart + leftLen - 1, inStart, rootIndex - 1)
    root.right = build(postorder, inorder, postStart + leftLen, postEnd - 1, rootIndex + 1, inEnd)
    return root
}

var buildTree = function(inorder, postorder) {
    for(let i = 0; i < inorder.length; i++) {
        valToIndex.set(inorder[i], i)
    }

    return build(postorder, inorder, 0, postorder.length - 1, 0, inorder.length - 1)
};
```
æ˜¯ä¸æ˜¯å’Œå‰åºå’Œä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘å¦‚å‡ºä¸€è¾™ï¼ŒåŒºåˆ«åªåœ¨äºï¼Œæ‰¾æ ¹èŠ‚ç‚¹ä»åŸæ¥çš„preorder[preStart], å˜æˆäº†ç°åœ¨çš„postorder[postEnd]ä»¥åŠéå†å·¦å³å­æ ‘èµ·å§‹å’Œç»ˆæ­¢ç´¢å¼•ä½ç½®çš„åŒºåˆ«ã€‚

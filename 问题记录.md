<a name="V0tUR"></a>
## 2023-08-16
<a name="zSiYz"></a>
#### 二维数组创建不够熟练
```javascript

let arr = []
// 1.
for(let i = 0; i < 3; i++) {
	arr.push(new Array.fill(1))
}

// 2.
Array.from({length: 3}, () => new Array(4).fill(1))
```
<a name="aevdV"></a>
#### Performance monitor

- Performance monitor 打开方式
   - F12 打开控制台
   - 右上角三个点选择More Tools
   - 选择Performance monitor
- **CPU useage**
   - **通常是大量的DOM渲染/操作，或者非常大的运算量导致。 ex：长列表渲染，大量表单渲染截图等功能导致CPU的上升**
- **Js heap size**
   - **浏览器有非常强大内存的垃圾回收机制。**
   - **当该参数，页面禁止不动几秒后渐渐减少，说明是浏览器的垃圾回收机制在发挥作用**
   - **当队内存持续处于高位，一直没有下降的情况，需要对业务进行分析是否有数据处于异常新增的状态，导致无法被浏览器回收。ex：定义了大量的闭包，有非常高的循环一直在给新对象赋新值，有很多定时器一直在执行代码。**
- performance.memory可以查询堆内存大小
```javascript
if (window.performance && window.performance.memory) {
  var memoryInfo = window.performance.memory;

  console.log("Total JS Heap Size: " + memoryInfo.totalJSHeapSize);
  console.log("Used JS Heap Size: " + memoryInfo.usedJSHeapSize);
  console.log("JS Heap Size Limit: " + memoryInfo.jsHeapSizeLimit);
} else {
  console.log("Performance memory API not supported in this browser.");
}

```
<a name="A5M9S"></a>
#### 尾递归
尾递归优化，是指函数结束调用只能调用自身。这样栈中不会一直push递归函数，尾调用会直接替换函数。<br />代码优化示例如下：
```javascript
function Sum(num) {
  if(num === 1) return 1
  return num + Sum(num - 1)
}

// 尾调用优化
function Sum(num, sum) {
  if(num === 1) return num + sum
  return Sum(num-1,sum + num)
}
```
栈内存储结构对比如图所示，可以避免当数据过大(num起始数据为1000000)时出现栈溢出的情况：<br />**优化前			**<br />![image.png](https://cdn.nlark.com/yuque/0/2023/png/29453752/1692201626165-1140138a-4d20-4c5e-8f81-ffdc8aa5f4df.png#averageHue=%23fff1f1&clientId=u141ee722-8b65-4&from=paste&height=469&id=uc1b11dc1&originHeight=938&originWidth=618&originalType=binary&ratio=2&rotation=0&showTitle=false&size=40055&status=done&style=none&taskId=ua5b8d91e-1511-4f2c-88f9-ca345b5962d&title=&width=309)<br />**		优化后**<br />![image.png](https://cdn.nlark.com/yuque/0/2023/png/29453752/1692201285804-fd322687-0615-4ef1-8671-c8db55eccc94.png#averageHue=%23fff6f6&clientId=u141ee722-8b65-4&from=paste&height=436&id=u481f176a&originHeight=872&originWidth=690&originalType=binary&ratio=2&rotation=0&showTitle=false&size=21369&status=done&style=none&taskId=ub587cbca-e1d9-42bf-a288-53651f240b9&title=&width=345)

<a name="jQSuS"></a>
#### 最近几年新的API
![](https://cdn.nlark.com/yuque/0/2023/jpeg/29453752/1692797968307-20a11ffa-d06f-4160-a715-135815b99436.jpeg)
```javascript

// https://github.com/tc39/proposals/blob/main/finished-proposals.md
// LRU 用在 keepalive
// 整理笔记 ：提炼 + 细分 + 精华代码
// 算法：爬楼梯
```

